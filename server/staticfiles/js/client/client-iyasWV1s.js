import{j as e}from"./client-CFcKg02j.js";import{u as g,b as j}from"./client-BGjJP6n3.js";import{P as f,c as y,b as q}from"./client-1tLCuIYP.js";import{L as _}from"./client-DuNBGWTj.js";import{u as v}from"./client-BF4jqV8B.js";import{u as w}from"./client-ye_Tc8aY.js";import"./client-BX9QSSmL.js";import"./client-DW_MHI2K.js";import"./client-DcEZrv79.js";import"./client-vn6Di64w.js";const Q=()=>{var o;const[a]=v(),n=a.get("subject_id"),t=a.get("question_id"),{register:m,handleSubmit:u,getValues:l,formState:{errors:c}}=w(),{data:s={},isLoading:i,isFetching:d}=g({queryKey:["question",t],queryFn:()=>q({question_id:t})}),{mutate:p,data:r,isPending:x,isIdle:h}=j({mutationKey:["checkAnswer"],mutationFn:()=>y({question_id:t,user_answer:l("user_answer")})}),b=()=>{p()};return e.jsxs(e.Fragment,{children:[e.jsx(f,{isFetching:d,isLoading:i,title:"Savolga javob yozing",breadcrumbs:[{name:((o=s==null?void 0:s.subject)==null?void 0:o.name)||"Savollar",link:`/subject_questions?subject_id=${n}`},{name:"Savolga javob yozish"}]}),e.jsxs("form",{onSubmit:u(b),className:"lg:p-10 sm:p-3 md:p-5",children:[i&&e.jsx(_,{title:"Sohalar yuklanmoqda..."}),e.jsx("h4",{className:"first-letter:capitalize text-xl font-semibold",children:s==null?void 0:s.title}),e.jsx("textarea",{...m("user_answer",{required:!0}),rows:4,placeholder:"Javob yozing...",className:"textarea textarea-primary w-full"}),c.user_answer&&e.jsx("span",{className:"text-sm text-error",children:"Javob yozing"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Tekshirish"}),x?e.jsx("span",{className:"text-primary loading loading-spinner loading-lg"}):h?null:e.jsxs("div",{className:"text-success font-semibold",children:["Kosinus o'xshashligi:"," ",Math.round(((r==null?void 0:r.score)||0)*1e3)/1e3]})]})]})]})};export{Q as default};
