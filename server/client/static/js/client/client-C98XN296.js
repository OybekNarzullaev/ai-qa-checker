import{j as s}from"./client-CFcKg02j.js";import{u as g,b as j}from"./client-BGjJP6n3.js";import{P as y,c as f,b as _}from"./client-1tLCuIYP.js";import{L as v}from"./client-DuhG0OLC.js";import{u as q}from"./client-BF4jqV8B.js";import{u as w}from"./client-ye_Tc8aY.js";import"./client-BX9QSSmL.js";import"./client-DW_MHI2K.js";import"./client-DcEZrv79.js";import"./client-vn6Di64w.js";const M=()=>{var o;const[r]=q(),n=r.get("subject_id"),i=r.get("question_id"),{register:m,handleSubmit:l,getValues:u,formState:{errors:c}}=w(),{data:e={},isLoading:a,isFetching:d}=g({queryKey:["question",i],queryFn:()=>_({question_id:i})}),{mutate:h,data:t,isPending:x,isIdle:p}=j({mutationKey:["checkAnswer"],mutationFn:()=>f({question_id:i,user_answer:u("user_answer")})}),b=()=>{h()};return s.jsxs(s.Fragment,{children:[s.jsx(y,{isFetching:d,isLoading:a,title:"Savolga javob yozing",breadcrumbs:[{name:((o=e==null?void 0:e.subject)==null?void 0:o.name)||"Savollar",link:`/subject_questions?subject_id=${n}`},{name:"Savolga javob yozish"}]}),s.jsxs("form",{onSubmit:l(b),className:"lg:p-10 sm:p-3 md:p-5",children:[a&&s.jsx(v,{title:"Sohalar yuklanmoqda..."}),s.jsx("h4",{className:"first-letter:capitalize text-xl font-semibold",children:e==null?void 0:e.title}),s.jsx("textarea",{...m("user_answer",{required:!0}),rows:4,placeholder:"Javob yozing...",className:"textarea textarea-primary w-full"}),c.user_answer&&s.jsx("span",{className:"text-sm text-error",children:"Javob yozing"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("button",{type:"submit",className:"btn btn-primary",children:"Tekshirish"}),x?s.jsx("span",{className:"text-primary loading loading-spinner loading-lg"}):p?null:s.jsxs("div",{className:"text-success font-semibold",children:[s.jsxs("div",{children:["Kosinus o'xshashligi:"," ",Math.round(((t==null?void 0:t.cosine_similarity)||0)*1e3)/1e3]}),s.jsxs("div",{children:["BLEU o'xshashligi:"," ",Math.round(((t==null?void 0:t.bleu_similarity)||0)*1e3)/1e3]})]})]})]})]})};export{M as default};
