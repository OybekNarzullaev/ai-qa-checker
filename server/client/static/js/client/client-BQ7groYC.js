import{r as u,j as e}from"./client-CFcKg02j.js";import{P as v}from"./client-VVoV6ae_.js";import{g as S,s as w}from"./client-BhbYuF3b.js";import{u as N}from"./client-ye_Tc8aY.js";import"./client-BX9QSSmL.js";import"./client-Bg0f9_HF.js";import"./client-DcEZrv79.js";import"./client-vn6Di64w.js";import"./client-D3RtENOo.js";import"./client-CEm0v9VI.js";import"./client-5a4Y-fw1.js";const A=()=>{var d;const[o,p]=u.useState(S("data")),[l,m]=u.useState(void 0),{question_data:r,scores:t}=o,a=r[t.length].questions.find(s=>s.score===null),{register:g,handleSubmit:x,setValue:b,formState:{errors:c}}=N(),j=()=>{p(s=>{const n=r[t.length],h=l.is_true;if(n.questions=n.questions.map(i=>i.id===a.id?{...a,user_answer:l.title,score:h?1:0}:i),s.question_data=r.map((i,f)=>f===t.length?n:i),h){const i=a.level.code;t.push(i===1?10:i===2?8:6)}else n.questions.find(i=>i.score===null)||t.push(0);if(w("data",{...s,scores:t}),t.length===r.length){window.location.replace("/my_quiz_results");return}return b("answer",null),m(void 0),{...s,scores:t}})};return e.jsxs(e.Fragment,{children:[e.jsx(v,{isFetching:!1,isLoading:!1,title:"Savolga javob yozing",breadcrumbs:[{name:((d=o==null?void 0:o.subject)==null?void 0:d.name)||"Savollar"},{name:"Savolga javob yozish"}]}),e.jsxs("div",{className:"lg:p-10 sm:p-3 md:p-5 bg-base-100",children:[e.jsx("div",{className:"join mb-3",children:r.map((s,n)=>e.jsx("button",{className:`btn btn-sm ${t.length>=n&&"btn-primary"} join-item`,children:n+1},n))}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm",children:["Savol darajasi: ",a.level.code]}),e.jsx("h4",{className:"first-letter:capitalize text-xl font-semibold",children:a==null?void 0:a.title})]}),e.jsx("div",{children:e.jsxs("form",{onSubmit:x(j),className:"flex flex-col gap-3 mt-5",children:[a==null?void 0:a.answers.map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{className:"checkbox checkbox-primary",name:"answer",type:"checkbox",...g("answer",{required:"Javobni belgilang"}),checked:(l==null?void 0:l.id)===s.id,onClick:()=>m(s),id:`ans-${s.id}`})," ",e.jsx("label",{htmlFor:`ans-${s.id}`,children:s.title})]},s.id)),c.answer&&e.jsx("span",{className:"text-sm text-error",children:c.answer.message}),e.jsx("button",{type:"submit",className:`btn ${t.length+1===r.length?"btn-success text-white":"btn-primary"} w-fit mt-5`,children:t.length+1===r.length?"Tugatish":"Keyingi"})]})})]})]})};export{A as default};
