import{j as e,r as x}from"./client-CFcKg02j.js";import{u as p,b as u}from"./client-D3RtENOo.js";import{F as h}from"./client-CEm0v9VI.js";import{s as g,f as j}from"./client-CFu2U_VC.js";import{s as o,L as b}from"./client-Choa3Wht.js";import{P as f}from"./client-VVoV6ae_.js";import{u as y}from"./client-ye_Tc8aY.js";import"./client-BX9QSSmL.js";import"./client-DW_MHI2K.js";import"./client-Bg0f9_HF.js";import"./client-DcEZrv79.js";import"./client-vn6Di64w.js";import"./client-5a4Y-fw1.js";const N=({data:s,onBegin:a=()=>{}})=>e.jsxs("div",{className:"card w-96 shadow-xl bg-base-100",children:[e.jsx("figure",{className:"px-10 pt-10",children:e.jsx(h,{className:"text-9xl"})}),e.jsxs("div",{className:"card-body items-center text-center",children:[e.jsx("h2",{className:"card-title capitalize",children:s.name}),e.jsxs("p",{children:["Savollar soni: ",s.questions_count," ta"]}),e.jsx("div",{className:"card-actions",children:e.jsx("button",{onClick:a,className:"btn btn-primary",children:"Boshlash"})})]})]}),m=()=>document.getElementById("login_modal").click(),S=({subjectId:s})=>{const{register:a,handleSubmit:n,getValues:t,formState:{errors:r}}=y(),{isPending:i,mutate:c}=p({mutationKey:["start examp",s,t("firstname"),t("lastname")],mutationFn:()=>g({firstname:t("firstname"),lastname:t("lastname"),subject_id:s}).then(l=>{o("user",l.user),o("data",{...l,scores:[]}),window.location.replace("/answer2question")})}),d=()=>{c()};return e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"checkbox",id:"login_modal",className:"modal-toggle"}),e.jsx("div",{id:"login_modal",className:"modal",role:"dialog",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("div",{className:"bg-primary text-primary-content",children:e.jsx("h3",{className:"text-xl font-semibold p-3 text-center",children:"O'zingizni tanishtiring"})}),e.jsxs("form",{onSubmit:n(d),className:"p-3",children:[e.jsxs("div",{className:"flex gap-3 flex-col",children:[e.jsx("h4",{className:"text-lg",children:"Ismingiz va familiyangiz"}),e.jsx("input",{...a("firstname",{required:!0}),placeholder:"Ismingiz",type:"text",className:"input input-primary w-full"}),r.firstname&&e.jsx("span",{className:"text-sm text-error",children:"Ismingizni yozing"}),e.jsx("input",{...a("lastname",{required:!0}),placeholder:"Familiyangiz",type:"text",className:"input input-primary w-full"}),r.lastname&&e.jsx("span",{className:"text-sm text-error",children:"Familyangizni yozing"})]}),e.jsxs("div",{className:"flex gap-3 mt-3",children:[e.jsx("button",{disabled:i,type:"submit",className:"btn btn-primary",children:"Boshlash"}),e.jsx("button",{disabled:i,type:"button",className:"btn btn-warning",onClick:m,children:"Bekor qilish"})]})]})]})})]})},C=()=>{const[s,a]=x.useState(void 0),{data:n=[],isLoading:t,isFetching:r}=u({queryKey:["subjects"],queryFn:j});return e.jsxs(e.Fragment,{children:[e.jsx(f,{isFetching:r,isLoading:t,title:"Sohalar"}),e.jsx(S,{subjectId:s}),e.jsxs("div",{className:"lg:p-10 sm:p-3 md:p-5 flex flex-wrap gap-2 items-center",children:[t&&e.jsx(b,{title:"Sohalar yuklanmoqda..."}),n==null?void 0:n.map(i=>e.jsx(N,{onBegin:()=>{m(),a(i.id)},data:i},i.id))]})]})};export{C as default};
